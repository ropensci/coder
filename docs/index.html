<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Deterministic Categorization of Items Based on External Code Data • coder</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Deterministic Categorization of Items Based on External Code Data">
<meta property="og:description" content="
  Fast categorization of items based on external code data identified by 
  regular expressions.
  It is easy to introduce new classification schemes (by classcodes objects) or  
  to use default schemes included in the package. Use cases includes patient 
  categorization based on co-morbidity indices such as Charlson, Elixhauser, 
  RxRisk V, or the co-morbidity-polypharmacy score (CPS), as well as adverse 
  events after arthroplasty surgery.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">coder</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.11.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/coder.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/classcodes.html">Classcodes objects</a>
    </li>
    <li>
      <a href="articles/comorbidity.html">Co-morbidity</a>
    </li>
    <li>
      <a href="articles/conditions.html">conditions</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/eribul/coder/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<hr>
<p>title: “coder” output: github_document —</p>
<p><a href="https://github.com/eribul/coder/actions"><img src="https://github.com/eribul/coder/workflows/R-CMD-check/badge.svg" alt="R build status"></a> <a href="https://codecov.io/gh/eribul/coder"><img src="https://codecov.io/gh/eribul/coder/branch/master/graph/badge.svg" alt="codecov"></a> <a href="https://www.repostatus.org/#active"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a></p>
<!-- README.md is generated from README.Rmd. Please edit that file -->
<p>The goal of <code>coder</code> is to classify items from one dataset, using codes from a secondary source with classification schemes based on regular expressions and weighted indices. Default classification schemes (classcodes objects) are focused on patients classified by diagnoses, comorbidities, adverse events and medications.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can (soon) install the released version of coder from <a href="https://CRAN.R-project.org">CRAN</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="r"># install.packages("coder") # Not yet!</pre></div>
<p>And the development version from <a href="https://github.com/">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="co"># install.packages("remotes")</span>
<span class="kw pkg">remotes</span><span class="kw ns">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span>(<span class="st">"eribul/coder"</span>)</pre></div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>Assume we have some patients with corresponding dates of interest:</p>
<div class="sourceCode" id="cb3"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">coder</span>)
<span class="kw pkg">knitr</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">ex_people</span>))</pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">name</th>
<th align="left">event</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Miller, Von Buddenbrock</td>
<td align="left">2019-06-27</td>
</tr>
<tr class="even">
<td align="left">Enriquez, Anthony</td>
<td align="left">2019-12-09</td>
</tr>
<tr class="odd">
<td align="left">al-Dib, Farhaan</td>
<td align="left">2020-02-04</td>
</tr>
<tr class="even">
<td align="left">Martinez, Alison</td>
<td align="left">2019-11-11</td>
</tr>
<tr class="odd">
<td align="left">el-Masri, Junaid</td>
<td align="left">2019-08-30</td>
</tr>
<tr class="even">
<td align="left">Sam, Niki</td>
<td align="left">2020-02-16</td>
</tr>
</tbody>
</table>
<p>We also have some external medical data (ICD-10-codes recorded at previous hospital):</p>
<div class="sourceCode" id="cb4"><pre class="r"><span class="kw pkg">knitr</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">ex_icd10</span>))</pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">id</th>
<th align="left">code_date</th>
<th align="left">code</th>
<th align="left">hdia</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Aguilera, Brandon</td>
<td align="left">2019-07-11</td>
<td align="left">O350XX9</td>
<td align="left">TRUE</td>
</tr>
<tr class="even">
<td align="left">Aguilera, Brandon</td>
<td align="left">2019-10-05</td>
<td align="left">S55101A</td>
<td align="left">TRUE</td>
</tr>
<tr class="odd">
<td align="left">Aguilera, Brandon</td>
<td align="left">2019-11-05</td>
<td align="left">A4181</td>
<td align="left">TRUE</td>
</tr>
<tr class="even">
<td align="left">Alexander, Bethany</td>
<td align="left">2019-03-21</td>
<td align="left">S62126K</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="left">Alexander, Bethany</td>
<td align="left">2019-04-25</td>
<td align="left">I70718</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="left">Alexander, Bethany</td>
<td align="left">2019-08-30</td>
<td align="left">O368124</td>
<td align="left">FALSE</td>
</tr>
</tbody>
</table>
<p>Using those two sources, as well as a classification scheme (see below), we can easily identify all Charlson co-morbidities during one year prior to the event of interest.</p>
<div class="sourceCode" id="cb5"><pre class="r"><span class="no">ch</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="reference/categorize.html">categorize</a></span>(
    <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">ex_people</span>), <span class="no">ex_icd10</span>, <span class="st">"charlson"</span>,
    <span class="kw">id</span> <span class="kw">=</span> <span class="st">"name"</span>,
    <span class="kw">index</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"quan_original"</span>, <span class="st">"quan_updated"</span>),
    <span class="kw">codify_args</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">date</span> <span class="kw">=</span> <span class="st">"event"</span>, <span class="kw">days</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(-<span class="fl">365</span>, -<span class="fl">1</span>))
  )
<span class="co">#&gt; Classification based on: regex_icd10</span></pre></div>
<p>The result is a dataset with columns for each comorbidity and (optional) each weighted index (quan_original and quan_updated):</p>
<div class="sourceCode" id="cb6"><pre class="r"><span class="kw pkg">knitr</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(
  <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="no">ch</span>, <span class="no">name</span>, <span class="no">quan_original</span>, <span class="no">quan_updated</span>)
)</pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">name</th>
<th align="right">quan_original</th>
<th align="right">quan_updated</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Enriquez, Anthony</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Martinez, Alison</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Miller, Von Buddenbrock</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">Sam, Niki</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">al-Dib, Farhaan</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">el-Masri, Junaid</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
</div>
<div id="classification-schemes" class="section level2">
<h2 class="hasAnchor">
<a href="#classification-schemes" class="anchor"></a>Classification schemes</h2>
<p>Classification schemes (<code>classcodes</code> objects) are based on regular expressions for computational speed, but their content can be summarized and visualized for clarity. Arbitrary <code>classcodes</code> objects can also be specified by the user.</p>
<div id="default-classcodes" class="section level3">
<h3 class="hasAnchor">
<a href="#default-classcodes" class="anchor"></a>Default classcodes</h3>
<p>The package includes default <code>classcodes</code> for medical patient data based on the international classification of diseases version 8, 9 and 10 (ICD-8/9/10), as well as the Anatomical Therapeutic Chemical Classification System (ATC) for medical prescription data.</p>
<p>Default <code>classcades</code> are listed in the table. Each classification (classcodes column) can be based on several code systems (regex column) and have several alternative weighted indices (indices column). Those might be combined freely.</p>
<table class="table">
<colgroup>
<col width="6%">
<col width="39%">
<col width="53%">
</colgroup>
<thead><tr class="header">
<th align="left">classcodes</th>
<th align="left">regex</th>
<th align="left">indices</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">charlson</td>
<td align="left">icd10, icd9cm_deyo, icd9cm_enhanced, icd10_rcs, icd8_brusselaers, icd9_brusselaers</td>
<td align="left">index_charlson, index_deyo_ramano, index_dhoore, index_ghali, index_quan_original, index_quan_updated</td>
</tr>
<tr class="even">
<td align="left">cps</td>
<td align="left">icd10</td>
<td align="left">index_only_ordinary</td>
</tr>
<tr class="odd">
<td align="left">elixhauser</td>
<td align="left">icd10, icd10_short, icd9cm, icd9cm_ahrqweb, icd9cm_enhanced</td>
<td align="left">index_sum_all, index_sum_all_ahrq, index_walraven, index_sid29, index_sid30, index_ahrq_mort, index_ahrq_readm</td>
</tr>
<tr class="even">
<td align="left">ex_carbrands</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">hip_ae</td>
<td align="left">icd10, kva, icd10_fracture</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">hip_ae_hailer</td>
<td align="left">icd10, kva</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">knee_ae</td>
<td align="left">icd10, kva</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">rxriskv</td>
<td align="left">pratt, caughey, garland</td>
<td align="left">index_pratt, index_sum_all</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="relation-to-other-packages" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#relation-to-other-packages" class="anchor"></a>Relation to other packages</h1></div>
<p><code>coder</code> uses <code>data.table</code> as a backend to increase computational speed for large datasets. There are some R packages with a narrow focus on Charlson and Elixhauser co-morbidity based on ICD-codes (<a href="https://CRAN.R-project.org/package=icd">icd</a>, <a href="https://CRAN.R-project.org/package=comorbidity">comorbidity</a>, <a href="https://CRAN.R-project.org/package=medicalrisk">medicalrisk</a>, <a href="https://github.com/gforge/comorbidities.icd10">comorbidities.icd10</a>, <a href="https://github.com/wtcooper/icdcoder">icdcoder</a>). The <code>coder</code> package includes similar functionalities but has a wider scope.</p>
</div>
<div id="citation" class="section level1">
<h1 class="hasAnchor">
<a href="#citation" class="anchor"></a>Citation</h1>
<div class="sourceCode" id="cb7"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/citation.html">citation</a></span>(<span class="st">"coder"</span>)
<span class="co">#&gt; </span>
<span class="co">#&gt; To cite package 'coder' in publications use:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Erik Bulow (2020). coder: Deterministic Categorization of Items Based on External Code</span>
<span class="co">#&gt;   Data. R package version 0.11.3. https://github.com/eribul/coder</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; A BibTeX entry for LaTeX users is</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   @Manual{,</span>
<span class="co">#&gt;     title = {coder: Deterministic Categorization of Items Based on External Code</span>
<span class="co">#&gt; Data},</span>
<span class="co">#&gt;     author = {Erik Bulow},</span>
<span class="co">#&gt;     year = {2020},</span>
<span class="co">#&gt;     note = {R package version 0.11.3},</span>
<span class="co">#&gt;     url = {https://github.com/eribul/coder},</span>
<span class="co">#&gt;   }</span></pre></div>
</div>
<div id="contribution" class="section level1">
<h1 class="hasAnchor">
<a href="#contribution" class="anchor"></a>Contribution</h1>
<p>Contributions to this package are welcome. The preferred method of contribution is through a github pull request. Feel free to contact me by creating an issue. Please note that this project is released with a <a href="CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/eribul/coder/">https://​github.com/​eribul/​coder/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/eribul/coder/issues">https://​github.com/​eribul/​coder/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://github.com/eribul">Erik Bulow</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-9973-456X" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://github.com/eribul">Erik Bulow</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
