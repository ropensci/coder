<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Categorize cases based on external data and classification scheme — categorize • coder</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Categorize cases based on external data and classification scheme — categorize"><meta name="description" content="This is the main function of the package, which relies of a triad of objects:
(1) data with unit id:s and possible dates of interest;
(2) codedata for corresponding
units and with optional dates of interest and;
(3) a classification scheme (classcodes object; cc) with regular
expressions to identify and categorize relevant codes.
The function combines the three underlying steps performed by
codify(), classify() and index().
Relevant arguments are passed to those functions by
codify_args and cc_args."><meta property="og:description" content="This is the main function of the package, which relies of a triad of objects:
(1) data with unit id:s and possible dates of interest;
(2) codedata for corresponding
units and with optional dates of interest and;
(3) a classification scheme (classcodes object; cc) with regular
expressions to identify and categorize relevant codes.
The function combines the three underlying steps performed by
codify(), classify() and index().
Relevant arguments are passed to those functions by
codify_args and cc_args."><meta property="og:image" content="https://docs.ropensci.org/coder/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">coder</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/coder.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/classcodes.html">Classcodes</a></li>
    <li><a class="dropdown-item" href="../articles/ex_data.html">Example data</a></li>
    <li><a class="dropdown-item" href="../articles/Interpret_regular_expressions.html">Interpret regular expressions</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ropensci/coder/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Categorize cases based on external data and classification scheme</h1>
      <small class="dont-index">Source: <a href="https://github.com/ropensci/coder/blob/HEAD/R/categorize.R" class="external-link"><code>R/categorize.R</code></a></small>
      <div class="d-none name"><code>categorize.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This is the main function of the package, which relies of a triad of objects:
(1) <code>data</code> with unit id:s and possible dates of interest;
(2) <code>codedata</code> for corresponding
units and with optional dates of interest and;
(3) a classification scheme (<code><a href="classcodes.html">classcodes</a></code> object; <code>cc</code>) with regular
expressions to identify and categorize relevant codes.
The function combines the three underlying steps performed by
<code><a href="codify.html">codify()</a></code>, <code><a href="classify.html">classify()</a></code> and <code><a href="index_fun.html">index()</a></code>.
Relevant arguments are passed to those functions by
<code>codify_args</code> and <code>cc_args</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">categorize</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'data.frame'</span></span>
<span><span class="fu">categorize</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'tbl_df'</span></span>
<span><span class="fu">categorize</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'data.table'</span></span>
<span><span class="fu">categorize</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span>, <span class="va">codedata</span>, <span class="va">id</span>, <span class="va">code</span>, codify_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'codified'</span></span>
<span><span class="fu">categorize</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  <span class="va">cc</span>,</span>
<span>  index <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cc_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  check.names <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  .data_cols <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>data set with mandatory character id column
(identified by argument <code>id = "&lt;col_name&gt;"</code>),
and optional <code><a href="https://rdrr.io/r/base/Dates.html" class="external-link">Date</a></code>  of interest
(identified by argument <code>date = "&lt;col_name&gt;"</code>).
Alternatively, the output from <code><a href="codify.html">codify()</a></code></p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>arguments passed between methods</p></dd>


<dt id="arg-codedata">codedata<a class="anchor" aria-label="anchor" href="#arg-codedata"></a></dt>
<dd><p>external code data with mandatory character id column
(identified by <code>id = "&lt;col_name&gt;"</code>),
code column (identified by argument <code>code = "&lt;col_name&gt;"</code>)
and optional <code><a href="https://rdrr.io/r/base/Dates.html" class="external-link">Date</a></code> column
(identified by <code>codify_args = list(code_date = "&lt;col_name&gt;")</code>).</p></dd>


<dt id="arg-id">id<a class="anchor" aria-label="anchor" href="#arg-id"></a></dt>
<dd><p>name of unique character id column found in
both <code>x</code>and <code>codedata</code>.
(where it must not be unique).</p></dd>


<dt id="arg-code">code<a class="anchor" aria-label="anchor" href="#arg-code"></a></dt>
<dd><p>name of code column in <code>codedata</code>.</p></dd>


<dt id="arg-codify-args">codify_args<a class="anchor" aria-label="anchor" href="#arg-codify-args"></a></dt>
<dd><p>Lists of named arguments passed to <code><a href="codify.html">codify()</a></code></p></dd>


<dt id="arg-cc">cc<a class="anchor" aria-label="anchor" href="#arg-cc"></a></dt>
<dd><p><code><a href="classcodes.html">classcodes</a></code> object (or name of a default object from
<code><a href="all_classcodes.html">all_classcodes()</a></code>).</p></dd>


<dt id="arg-index">index<a class="anchor" aria-label="anchor" href="#arg-index"></a></dt>
<dd><p>Argument passed to <code><a href="index_fun.html">index()</a></code>.
A character vector of names of columns with index weights from the
corresponding classcodes object (as supplied by the <code>cc</code>argument).
See <code>attr(cc, "indices")</code> for available options.
Set to <code>FALSE</code> if no index should be calculated.
If <code>NULL</code>, the default, all available indices (from <code>attr(cc, "indices")</code>)
are provided.</p></dd>


<dt id="arg-cc-args">cc_args<a class="anchor" aria-label="anchor" href="#arg-cc-args"></a></dt>
<dd><p>List with named arguments passed to
<code><a href="set_classcodes.html">set_classcodes()</a></code></p></dd>


<dt id="arg-check-names">check.names<a class="anchor" aria-label="anchor" href="#arg-check-names"></a></dt>
<dd><p>Column names are based on <code>cc$group</code>, which might include
spaces. Those names are changed to syntactically correct names by
<code>check.names = TRUE</code>. Syntactically invalid, but grammatically correct
names might be preferred for presentation of the data as achieved by
<code>check.names = FALSE</code>. Alternatively, if <code>categorize</code> is called repeatedly,
longer informative names might be created by
<code>cc_args = list(tech_names = TRUE)</code>.</p></dd>


<dt id="arg--data-cols">.data_cols<a class="anchor" aria-label="anchor" href="#arg--data-cols"></a></dt>
<dd><p>used internally</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Object of the same class as <code>x</code> with additional logical columns
indicating membership of groups identified by the
<code>classcodes</code> object (the <code>cc</code> argument).
Numeric indices are also included if requested by the <code>index</code> argument.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other verbs:
<code><a href="classify.html">classify</a>()</code>,
<code><a href="codify.html">codify</a>()</code>,
<code><a href="index_fun.html">index_fun</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># For this example, 1 core would suffice:</span></span></span>
<span class="r-in"><span><span class="va">old_threads</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/openmp-utils.html" class="external-link">getDTthreads</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/openmp-utils.html" class="external-link">setDTthreads</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># For some patient data (ex_people) and related hospital visit code data</span></span></span>
<span class="r-in"><span><span class="co"># with ICD 10-codes (ex_icd10), add the Elixhauser comorbidity</span></span></span>
<span class="r-in"><span><span class="co"># conditions based on all registered ICD10-codes</span></span></span>
<span class="r-in"><span><span class="fu">categorize</span><span class="op">(</span></span></span>
<span class="r-in"><span>   x            <span class="op">=</span> <span class="va">ex_people</span>,</span></span>
<span class="r-in"><span>   codedata     <span class="op">=</span> <span class="va">ex_icd10</span>,</span></span>
<span class="r-in"><span>   cc           <span class="op">=</span> <span class="st">"elixhauser"</span>,</span></span>
<span class="r-in"><span>   id           <span class="op">=</span> <span class="st">"name"</span>,</span></span>
<span class="r-in"><span>   code         <span class="op">=</span> <span class="st">"icd10"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Classification based on: icd10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 100 × 40</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    name   surgery    congestive.heart.fai…¹ cardiac.arrhythmias valvular.disease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> Chen,… 2025-04-21 FALSE                  FALSE               FALSE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> Grave… 2025-01-11 FALSE                  FALSE               FALSE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> Truji… 2024-12-29 FALSE                  FALSE               FALSE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> Simps… 2025-04-02 FALSE                  FALSE               FALSE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> Chin,… 2025-03-16 FALSE                  FALSE               FALSE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> Le, C… 2024-10-18 FALSE                  FALSE               FALSE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> Kang,… 2025-01-20 FALSE                  FALSE               FALSE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> Shuem… 2024-10-19 FALSE                  FALSE               FALSE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> Bouch… 2025-03-27 FALSE                  FALSE               FALSE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> Le, S… 2025-03-01 FALSE                  FALSE               FALSE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 90 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ abbreviated name: ¹​congestive.heart.failure</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 35 more variables: pulmonary.circulation.disorder &lt;lgl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   peripheral.vascular.disorder &lt;lgl&gt;, hypertension.uncomplicated &lt;lgl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   hypertension.complicated &lt;lgl&gt;, paralysis &lt;lgl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   other.neurological.disorders &lt;lgl&gt;, chronic.pulmonary.disease &lt;lgl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   diabetes.uncomplicated &lt;lgl&gt;, diabetes.complicated &lt;lgl&gt;, …</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Add Charlson categories and two versions of a calculated index</span></span></span>
<span class="r-in"><span><span class="co"># ("quan_original" and "quan_updated").</span></span></span>
<span class="r-in"><span><span class="fu">categorize</span><span class="op">(</span></span></span>
<span class="r-in"><span>   x            <span class="op">=</span> <span class="va">ex_people</span>,</span></span>
<span class="r-in"><span>   codedata     <span class="op">=</span> <span class="va">ex_icd10</span>,</span></span>
<span class="r-in"><span>   cc           <span class="op">=</span> <span class="st">"charlson"</span>,</span></span>
<span class="r-in"><span>   id           <span class="op">=</span> <span class="st">"name"</span>,</span></span>
<span class="r-in"><span>   code         <span class="op">=</span> <span class="st">"icd10"</span>,</span></span>
<span class="r-in"><span>   index        <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"quan_original"</span>, <span class="st">"quan_updated"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Classification based on: icd10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 100 × 21</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    name              surgery    myocardial.infarction congestive.heart.failure</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> Chen, Trevor      2025-04-21 FALSE                 FALSE                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> Graves, Acineth   2025-01-11 FALSE                 FALSE                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> Trujillo, Yanelly 2024-12-29 FALSE                 FALSE                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> Simpson, Kenneth  2025-04-02 FALSE                 FALSE                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> Chin, Nelson      2025-03-16 FALSE                 FALSE                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> Le, Christina     2024-10-18 FALSE                 FALSE                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> Kang, Xuan        2025-01-20 FALSE                 FALSE                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> Shuemaker, Lauren 2024-10-19 FALSE                 FALSE                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> Boucher, Teresa   2025-03-27 FALSE                 FALSE                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> Le, Soraiya       2025-03-01 FALSE                 FALSE                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 90 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 17 more variables: peripheral.vascular.disease &lt;lgl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   cerebrovascular.disease &lt;lgl&gt;, dementia &lt;lgl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   chronic.pulmonary.disease &lt;lgl&gt;, rheumatic.disease &lt;lgl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   peptic.ulcer.disease &lt;lgl&gt;, mild.liver.disease &lt;lgl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   diabetes.without.complication &lt;lgl&gt;, hemiplegia.or.paraplegia &lt;lgl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   renal.disease &lt;lgl&gt;, diabetes.complication &lt;lgl&gt;, malignancy &lt;lgl&gt;, …</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Only include recent hospital visits within 30 days before surgery,</span></span></span>
<span class="r-in"><span><span class="fu">categorize</span><span class="op">(</span></span></span>
<span class="r-in"><span>   x            <span class="op">=</span> <span class="va">ex_people</span>,</span></span>
<span class="r-in"><span>   codedata     <span class="op">=</span> <span class="va">ex_icd10</span>,</span></span>
<span class="r-in"><span>   cc           <span class="op">=</span> <span class="st">"charlson"</span>,</span></span>
<span class="r-in"><span>   id           <span class="op">=</span> <span class="st">"name"</span>,</span></span>
<span class="r-in"><span>   code         <span class="op">=</span> <span class="st">"icd10"</span>,</span></span>
<span class="r-in"><span>   index        <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"quan_original"</span>, <span class="st">"quan_updated"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   codify_args  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      date      <span class="op">=</span> <span class="st">"surgery"</span>,</span></span>
<span class="r-in"><span>      days      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">30</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      code_date <span class="op">=</span> <span class="st">"admission"</span></span></span>
<span class="r-in"><span>   <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Classification based on: icd10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 100 × 21</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    name              surgery    myocardial.infarction congestive.heart.failure</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> Chen, Trevor      2025-04-21 FALSE                 FALSE                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> Graves, Acineth   2025-01-11 <span style="color: #BB0000;">NA</span>                    <span style="color: #BB0000;">NA</span>                      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> Trujillo, Yanelly 2024-12-29 <span style="color: #BB0000;">NA</span>                    <span style="color: #BB0000;">NA</span>                      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> Simpson, Kenneth  2025-04-02 FALSE                 FALSE                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> Chin, Nelson      2025-03-16 FALSE                 FALSE                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> Le, Christina     2024-10-18 FALSE                 FALSE                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> Kang, Xuan        2025-01-20 FALSE                 FALSE                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> Shuemaker, Lauren 2024-10-19 FALSE                 FALSE                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> Boucher, Teresa   2025-03-27 <span style="color: #BB0000;">NA</span>                    <span style="color: #BB0000;">NA</span>                      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> Le, Soraiya       2025-03-01 FALSE                 FALSE                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 90 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 17 more variables: peripheral.vascular.disease &lt;lgl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   cerebrovascular.disease &lt;lgl&gt;, dementia &lt;lgl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   chronic.pulmonary.disease &lt;lgl&gt;, rheumatic.disease &lt;lgl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   peptic.ulcer.disease &lt;lgl&gt;, mild.liver.disease &lt;lgl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   diabetes.without.complication &lt;lgl&gt;, hemiplegia.or.paraplegia &lt;lgl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   renal.disease &lt;lgl&gt;, diabetes.complication &lt;lgl&gt;, malignancy &lt;lgl&gt;, …</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Multiple versions -------------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># We can compare categorization by according to Quan et al. (2005); "icd10",</span></span></span>
<span class="r-in"><span><span class="co"># and Armitage et al. (2010); "icd10_rcs" (see `?charlson`)</span></span></span>
<span class="r-in"><span><span class="co"># Note the use of `tech_names = TRUE` to distinguish the column names from the</span></span></span>
<span class="r-in"><span><span class="co"># two versions.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># We first specify some common settings ...</span></span></span>
<span class="r-in"><span><span class="va">ind</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"quan_original"</span>, <span class="st">"quan_updated"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cd</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>date <span class="op">=</span> <span class="st">"surgery"</span>, days <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">30</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span>, code_date <span class="op">=</span> <span class="st">"admission"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ... we then categorize once with "icd10" as the default regular expression ...</span></span></span>
<span class="r-in"><span><span class="fu">categorize</span><span class="op">(</span></span></span>
<span class="r-in"><span>   x            <span class="op">=</span> <span class="va">ex_people</span>,</span></span>
<span class="r-in"><span>   codedata     <span class="op">=</span> <span class="va">ex_icd10</span>,</span></span>
<span class="r-in"><span>   cc           <span class="op">=</span> <span class="st">"charlson"</span>,</span></span>
<span class="r-in"><span>   id           <span class="op">=</span> <span class="st">"name"</span>,</span></span>
<span class="r-in"><span>   code         <span class="op">=</span> <span class="st">"icd10"</span>,</span></span>
<span class="r-in"><span>   index        <span class="op">=</span> <span class="va">ind</span>,</span></span>
<span class="r-in"><span>   codify_args  <span class="op">=</span> <span class="va">cd</span>,</span></span>
<span class="r-in"><span>   cc_args      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tech_names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># .. and once more with `regex = "icd10_rcs"`</span></span></span>
<span class="r-in"><span><span class="fu">categorize</span><span class="op">(</span></span></span>
<span class="r-in"><span>   codedata     <span class="op">=</span> <span class="va">ex_icd10</span>,</span></span>
<span class="r-in"><span>   cc           <span class="op">=</span> <span class="st">"charlson"</span>,</span></span>
<span class="r-in"><span>   id           <span class="op">=</span> <span class="st">"name"</span>,</span></span>
<span class="r-in"><span>   code         <span class="op">=</span> <span class="st">"icd10"</span>,</span></span>
<span class="r-in"><span>   index        <span class="op">=</span> <span class="va">ind</span>,</span></span>
<span class="r-in"><span>   codify_args  <span class="op">=</span> <span class="va">cd</span>,</span></span>
<span class="r-in"><span>   cc_args      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>regex <span class="op">=</span> <span class="st">"icd10_rcs"</span>, tech_names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Classification based on: icd10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 100 × 37</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    name              surgery    charlson_icd10_myocardi…¹ charlson_icd10_conge…²</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>                     <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> Chen, Trevor      2025-04-21 FALSE                     FALSE                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> Graves, Acineth   2025-01-11 <span style="color: #BB0000;">NA</span>                        <span style="color: #BB0000;">NA</span>                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> Trujillo, Yanelly 2024-12-29 <span style="color: #BB0000;">NA</span>                        <span style="color: #BB0000;">NA</span>                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> Simpson, Kenneth  2025-04-02 FALSE                     FALSE                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> Chin, Nelson      2025-03-16 FALSE                     FALSE                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> Le, Christina     2024-10-18 FALSE                     FALSE                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> Kang, Xuan        2025-01-20 FALSE                     FALSE                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> Shuemaker, Lauren 2024-10-19 FALSE                     FALSE                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> Boucher, Teresa   2025-03-27 <span style="color: #BB0000;">NA</span>                        <span style="color: #BB0000;">NA</span>                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> Le, Soraiya       2025-03-01 FALSE                     FALSE                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 90 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ abbreviated names: ¹​charlson_icd10_myocardial_infarction,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   ²​charlson_icd10_congestive_heart_failure</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 33 more variables: charlson_icd10_peripheral_vascular_disease &lt;lgl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   charlson_icd10_cerebrovascular_disease &lt;lgl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   charlson_icd10_dementia &lt;lgl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   charlson_icd10_chronic_pulmonary_disease &lt;lgl&gt;, …</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># column names ------------------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Default column names are based on row names from corresponding classcodes</span></span></span>
<span class="r-in"><span><span class="co"># object but are modified to be syntactically correct.</span></span></span>
<span class="r-in"><span><span class="va">default</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>   <span class="fu">categorize</span><span class="op">(</span><span class="va">ex_people</span>, codedata <span class="op">=</span> <span class="va">ex_icd10</span>, cc <span class="op">=</span> <span class="st">"elixhauser"</span>,</span></span>
<span class="r-in"><span>              id <span class="op">=</span> <span class="st">"name"</span>, code <span class="op">=</span> <span class="st">"icd10"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Classification based on: icd10</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Set `check.names = FALSE` to retain original names:</span></span></span>
<span class="r-in"><span><span class="va">original</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu">categorize</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">ex_people</span>, codedata <span class="op">=</span> <span class="va">ex_icd10</span>, cc <span class="op">=</span> <span class="st">"elixhauser"</span>,</span></span>
<span class="r-in"><span>    id <span class="op">=</span> <span class="st">"name"</span>, code <span class="op">=</span> <span class="st">"icd10"</span>,</span></span>
<span class="r-in"><span>    check.names <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span>   <span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Classification based on: icd10</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Or use `tech_names = TRUE` for informative but long names (use case above)</span></span></span>
<span class="r-in"><span><span class="va">tech</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu">categorize</span><span class="op">(</span><span class="va">ex_people</span>, codedata <span class="op">=</span> <span class="va">ex_icd10</span>, cc <span class="op">=</span> <span class="st">"elixhauser"</span>,</span></span>
<span class="r-in"><span>    id <span class="op">=</span> <span class="st">"name"</span>, code <span class="op">=</span> <span class="st">"icd10"</span>,</span></span>
<span class="r-in"><span>    cc_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tech_names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Classification based on: icd10</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Compare</span></span></span>
<span class="r-in"><span><span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">default</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">original</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tech</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 40 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    `names(default)`               `names(original)`              `names(tech)`  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> name                           name                           name           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> surgery                        surgery                        surgery        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> congestive.heart.failure       congestive heart failure       elixhauser_icd…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> cardiac.arrhythmias            cardiac arrhythmias            elixhauser_icd…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> valvular.disease               valvular disease               elixhauser_icd…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> pulmonary.circulation.disorder pulmonary circulation disorder elixhauser_icd…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> peripheral.vascular.disorder   peripheral vascular disorder   elixhauser_icd…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> hypertension.uncomplicated     hypertension uncomplicated     elixhauser_icd…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> hypertension.complicated       hypertension complicated       elixhauser_icd…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> paralysis                      paralysis                      elixhauser_icd…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 30 more rows</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Go back to original number of threads</span></span></span>
<span class="r-in"><span><span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/openmp-utils.html" class="external-link">setDTthreads</a></span><span class="op">(</span><span class="va">old_threads</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/ropensci" class="external-link">Erik Bulow</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

